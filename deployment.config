# ============================================================================
# Majestic Health App - Configuración de Despliegue
# ============================================================================
# Este archivo contiene todas las variables configurables del sistema.
# Edita los valores según tus necesidades antes de ejecutar el despliegue.
# ============================================================================

# INFORMACIÓN DEL PROYECTO
# ----------------------------------------------------------------------------
PROJECT_NAME="majestic-app"
ENVIRONMENT="production"  # production, staging, development
AWS_REGION="us-east-1"

# BASE DE DATOS RDS
# ----------------------------------------------------------------------------
# IMPORTANTE: Estas credenciales están codificadas. En producción, usar
# AWS Secrets Manager para almacenar credenciales de forma segura.
DB_ENDPOINT="health-app.c4vuie06a0wt.us-east-1.rds.amazonaws.com"
DB_PORT="5432"
DB_NAME="health_app"
DB_USERNAME="majestic"
DB_PASSWORD="simple123"  # ¡CAMBIAR EN PRODUCCIÓN!

# LIGHTSAIL CONFIGURATION
# ----------------------------------------------------------------------------
# Tamaños disponibles de instancia:
# - nano_3_0:    512MB RAM, 1 vCPU   ($3.50/mes)
# - micro_3_0:   1GB RAM, 1 vCPU     ($5/mes)
# - small_3_0:   2GB RAM, 1 vCPU     ($10/mes)
# - medium_3_0:  4GB RAM, 2 vCPU     ($20/mes)
# - large_3_0:   8GB RAM, 2 vCPU     ($40/mes)
# - xlarge_3_0:  16GB RAM, 4 vCPU    ($80/mes)
# - 2xlarge_3_0: 32GB RAM, 8 vCPU    ($160/mes)

LIGHTSAIL_BUNDLE_ID="medium_3_0"  # Recomendado para producción
LIGHTSAIL_BLUEPRINT_ID="ubuntu_22_04"

# CONFIGURACIÓN DE LA APLICACIÓN
# ----------------------------------------------------------------------------
CONTAINER_PORT="32769"
NODE_ENV="production"

# CREDENCIALES DE LA APLICACIÓN
# ----------------------------------------------------------------------------
# IMPORTANTE: Estas son credenciales de ejemplo. Generar nuevas para producción.

# JWT Secret (generar con: openssl rand -hex 32)
JWT_SECRET="a1b2c3d4e5f6789012345678901234567890abcdef1234567890abcdef123456"

# Google OAuth
GOOGLE_CLIENT_ID="504338292423-nneklif626o8vj9n0o7btq03vjt49mqb.apps.googleusercontent.com"
GOOGLE_CLIENT_SECRET="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"

# OpenAI API
OPENAI_API_KEY="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"

# Diagnostic Token
DIAG_TOKEN="9f2c3f6e8a4b5d17e6f9a0c2d8e4f7b1c6a3d5e8f9b2c1d4e7a9c0f2b4d6e8a1"

# Admin Emails (separados por coma)
ADMIN_EMAILS="jmzv13@gmail.com"

# OPCIONES DE INICIALIZACIÓN
# ----------------------------------------------------------------------------
# Skip database initialization (útil si la BD ya está inicializada)
SKIP_DB_INIT="false"  # true/false

# Skip global jobs (background jobs)
SKIP_GLOBAL_JOBS="false"  # true/false

# CONFIGURACIÓN DE S3
# ----------------------------------------------------------------------------
# El bucket S3 se crea automáticamente con el siguiente patrón:
# ${PROJECT_NAME}-deployment-${DEPLOYMENT_ID}
# No necesitas especificar el nombre aquí.

# CONFIGURACIÓN DE ECR
# ----------------------------------------------------------------------------
# El repositorio ECR se crea automáticamente con el nombre del proyecto
# No necesitas especificar nada aquí.

# CONFIGURACIÓN DE TESTS
# ----------------------------------------------------------------------------
# Timeout para tests de Playwright (en milisegundos)
TEST_TIMEOUT="30000"

# Intentos de retry para tests fallidos
TEST_RETRIES="3"

# CONFIGURACIÓN DE MONITOREO
# ----------------------------------------------------------------------------
# Habilitar CloudWatch Logs (requiere configuración adicional)
ENABLE_CLOUDWATCH="false"

# CONFIGURACIÓN DE BACKUP
# ----------------------------------------------------------------------------
# Habilitar snapshots automáticos de Lightsail
ENABLE_AUTO_SNAPSHOTS="true"

# Retención de snapshots (días)
SNAPSHOT_RETENTION_DAYS="7"

# CONFIGURACIÓN DE DOMINIO (OPCIONAL)
# ----------------------------------------------------------------------------
# Si tienes un dominio personalizado, especifícalo aquí
# El script no configura el dominio automáticamente, pero puedes
# usarlo para generar configuraciones de Nginx con SSL

CUSTOM_DOMAIN=""  # ejemplo: app.majestichealth.com
ENABLE_SSL="false"  # Requiere Let's Encrypt

# CONFIGURACIÓN AVANZADA
# ----------------------------------------------------------------------------
# Enable debug mode
DEBUG_MODE="false"

# Docker image tag strategy
# - "latest": Siempre usar latest
# - "timestamp": Usar timestamp único
# - "git-hash": Usar git commit hash (requiere git)
IMAGE_TAG_STRATEGY="timestamp"

# Cleanup old resources
CLEANUP_OLD_RESOURCES="false"  # Eliminar recursos antiguos automáticamente

# Maximum deployment age (días) - recursos más antiguos se eliminan
MAX_DEPLOYMENT_AGE="30"

# ============================================================================
# NOTAS IMPORTANTES
# ============================================================================
#
# SEGURIDAD:
# 1. NUNCA comittear este archivo con credenciales reales a git
# 2. Usar AWS Secrets Manager en producción
# 3. Rotar todas las credenciales regularmente
# 4. Limitar acceso SSH solo a IPs conocidas
# 5. Habilitar MFA en cuenta AWS
#
# COSTOS:
# - Lightsail: Según bundle seleccionado ($20-160/mes típicamente)
# - RDS: Según instancia y uso (~$15-200/mes)
# - ECR: $0.10/GB/mes para storage
# - S3: $0.023/GB/mes para storage
# - Data transfer: Primeros 100GB gratis/mes
#
# PERFORMANCE:
# - medium_3_0 es suficiente para 10,000-50,000 users/día
# - large_3_0 para 50,000-200,000 users/día
# - Para más, considerar auto-scaling con ECS/EKS
#
# SOPORTE:
# - Email: jmzv13@gmail.com
# - Documentación: Ver README.md
#
# ============================================================================

# Para aplicar esta configuración, exportar las variables:
# source deployment.config

# O el script de despliegue puede leerlas automáticamente si este archivo
# se renombra a: .deployment.env
